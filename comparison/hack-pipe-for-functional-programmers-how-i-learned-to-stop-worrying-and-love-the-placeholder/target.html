<div id="__next"><div class="flex flex-row"><div class="print:hidden h-screen w-0 xl:w-88" style="width: 352px;"><header class="flex flex-col print:hidden fixed h-screen overflow-hidden w-inherit"><div class="h-screen overflow-hidden relative"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:absolute;top:0;left:0;bottom:0;right:0"><img alt="background image" sizes="100vw" srcset="/_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=640&amp;q=75 640w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=750&amp;q=75 750w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=828&amp;q=75 828w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=1080&amp;q=75 1080w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=1200&amp;q=75 1200w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=1920&amp;q=75 1920w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=2048&amp;q=75 2048w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=3840&amp;q=75 3840w" src="/_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=3840&amp;q=75" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;object-position:center center"></span></div><div class="absolute bg-etched rounded-lg text-center inline-flex lg:flex flex-row items-center justify-center lg:justify-start w-full max-w-xs sm:max-w-sm lg:max-w-md pin-center -mt-8 m-auto w-full"><div class="flex flex-row items-center justify-center w-full p-2"><div class="w-0 lg:w-48 h-48 rounded-full overflow-hidden grow-0 transition-width ease-in-out lg:w-0"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27360%27%20height=%27360%27/%3e"></span><img alt="avatar" srcset="/_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2015%2F02%2Fnew-avatar-sq.jpg&amp;w=384&amp;q=75 1x, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2015%2F02%2Fnew-avatar-sq.jpg&amp;w=750&amp;q=75 2x" src="/_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2015%2F02%2Fnew-avatar-sq.jpg&amp;w=750&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"></span></div><div class="font-muli lg:ml-5 grow"><div class="text-4xl lg:text-5xl font-bold font-muli mb-3" data-typeit-id="8458831">James DiGioia<span class="ti-cursor" style="visibility: hidden;"></span></div><div class="text-xl md:text-3xl mb-3 flex flex-row align-center justify-center text-center"><a class="border-2 border-transparent focus:border-primary focus:outline-none" href="https://www.facebook.com/james.digioia" target="_blank" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="text-4xl" style="color:#3b5998" alt="Facebook" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg></a><a class="border-2 border-transparent focus:border-primary focus:outline-none" href="https://www.linkedin.com/in/jamesdigioia" target="_blank" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="text-4xl" style="color:#4875b4" alt="LinkedIn" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a><a class="border-2 border-transparent focus:border-primary focus:outline-none" href="https://github.com/mAAdhaTTah/" target="_blank" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="text-4xl" style="color:#333" alt="GitHub" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"></path></svg></a></div><div class="relative text-xl lg:text-3xl" data-typeit-id="9370491">my little web home<span class="ti-cursor" style="visibility: hidden;"></span></div></div></div></div></header><div class="fixed top-2 left-2 z-50"><button class="rounded-full bg-darkg text-secondary p-1 border-2 border-darkg focus:outline-none focus:border-lightg"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="text-lg" alt="" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"></path></svg><div style="border:0;clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;margin:0 -1px -1px 0;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap">Open menu</div></button></div></div><div class="relative grow"><div style="opacity:1" class="absolute w-full"><main class="print:pt-0 print:mx-0 print:max-w-full"><div class="max-w-xl mx-auto"><article class="p-5 flow-root rounded pb-3 mb-5 max-w-xl mx-auto bg-primary"><header class="relative mb-5"><div class="w-full bg-etched rounded p-5"><div class="text-center"><h1 class="text-4xl text-lightg font-muli mb-5">Hack Pipe for Functional Programmers: How I learned to stop worrying and love the placeholder</h1></div><div class="flex justify-center"><div class="grow-0 entry-meta my-2 flex items-center rounded bg-secondary p-3 mb-3"><time class="font-body published" datetime="2021-09-11T18:00:54.000Z">September 11th, 2021</time><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mx-3 w-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><p class="font-body">James DiGioia</p></div></div></div></header><section class="max-w-prose"><p class="font-ovo text-xl leading-normal pb-3">I’ve been involved with the development of the pipe operator (<code class="whitespace-nowrap">|&gt;</code>) in JavaScript for 4 years, going all the way back to 2017 when it was just a humble pipeline that did basic function application. Over the course of the discussion, the proposal evolved into two competing syntaxes, F# &amp; Smart-Mix, exploring different ways of handling <code class="whitespace-nowrap">await</code>, arrow functions, and the overall approach to composition. Throughout the process, I was strongly in favor of the F# variant, preferring the simplicity &amp; functional nature of applying values to functions, and I argued strenuously for it over Smart-Mix, which I viewed as overly complicated.</p><p class="font-ovo text-xl leading-normal pb-3">The Smart-Mix syntax has since evolved into its current Hack iteration, dropping the “bare style” (<code class="whitespace-nowrap">x |&gt; a.b</code>, without a placeholder) and simplifying its syntax accordingly. Around that time, the previous champion of the proposal, <a class="no-underline border-b-2 border-darkg" href="https://twitter.com/littledan">Daniel Ehrenberg</a>, stepped down and <a class="no-underline border-b-2 border-darkg" href="https://twitter.com/tabatkins">Tab Atkins-Bittner</a> stepped in to take his place. While Daniel favored the F# pipe, Tab favored the Smart pipe previously and the evolved Hack pipe now and as champion, had been working to bring the TC39 committee (the one that specifies JavaScript) to consensus around the Hack pipe.</p><p class="font-ovo text-xl leading-normal pb-3">With Tab taking on champion responsibilities now, I’ve been discussing the proposal with them and the rest of the champion group. While I originally came into the conversation advocating for the F# pipe, <strong>I’m now convinced the Hack pipe is the superior option, and that it would be beneficial </strong><strong><em>to the functional community</em></strong><strong> to embrace it</strong>. At its core, Hack pipe is a better bridge between mainstream &amp; functional JavaScript and makes it easier for mainstream JavaScript to adopt functional patterns.</p><h2 class="mb-5 font-muli text-3xl">The functional/mainstream split</h2><p class="font-ovo text-xl leading-normal pb-3">Right now, the functional community is cut off from the rest of the JavaScript ecosystem. In order to do any of the fun &amp; exciting things functional programming enables, you need to use specially-designed functional libraries. <a class="no-underline border-b-2 border-darkg" href="https://github.com/lodash/lodash/tree/4.17.15-npm/fp"><code class="whitespace-nowrap">lodash/fp</code></a> is one well-known example; <a class="no-underline border-b-2 border-darkg" href="https://ramdajs.com/">Ramda</a> is another. While the immutability &amp; side-effect-free behaviors of these libraries are extremely valuable to both functional programmers &amp; the wider JavaScript community, they both also bring in the overhead of one of functional programming’s more complicated concepts: currying.</p><h3 class="mb-5 font-muli text-2xl">Traditional currying vs JavaScript currying</h3><p class="font-ovo text-xl leading-normal pb-3">Currying traditionally means functions that take a single argument at a time, returning a new function until it’s received all of its arguments, at which point the function is evaluated. To emulate this directly, you’d have to write functions in JavaScript like this:</p><div class="mb-b"><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="add.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">add</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token parameter">a</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token parameter">b</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>a<span class="token space"> </span><span class="token operator">+</span><span class="token space"> </span>b<span class="token punctuation">;</span><span class="token lf">
</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>3</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>add.js</span></div></div></div></div><p class="font-ovo text-xl leading-normal pb-3">This is great for functional composition. It’s a small, narrowly-focused function you can combine with other small, narrowly-focused functions to solve bigger problems. <code class="whitespace-nowrap">add</code> can be partially applied to create functions and use it in a larger composition:</p><div class="mb-b"><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="doubleThenAdd2.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span>doubleThenAdd2<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token function">doubleThenAdd2</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>12</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>doubleThenAdd2.js</span></div></div></div></div><p class="font-ovo text-xl leading-normal pb-3">But even with that benefit, this is clearly not the normal way to write functions. If you call them the normal way, they just take the first argument and discard everything after that.</p><div class="mb-b"><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="addCallNormal.js"><code class="language-js"><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>b<span class="token space"> </span>=&gt;<span class="token space"> </span>1<span class="token space"> </span>+<span class="token space"> </span>b;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>addCallNormal.js</span></div></div></div></div><p class="font-ovo text-xl leading-normal pb-3">Even functional programmers recognize that this is un-Javascipt-y, which is why they invented the <code class="whitespace-nowrap">curry</code> function.</p><div class="mb-b"><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="curriedAdd.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span>add<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">curry</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span><span class="token space"> </span>b</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>a<span class="token space"> </span><span class="token operator">+</span><span class="token space"> </span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>b<span class="token space"> </span>=&gt;<span class="token space"> </span>1<span class="token space"> </span>+<span class="token space"> </span>b;</span><span class="token lf">
</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>3</span><span class="token lf">
</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>3</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>curriedAdd.js</span></div></div></div></div><p class="font-ovo text-xl leading-normal pb-3"><code class="whitespace-nowrap">curry</code> takes in a normal function and returns a curried version that works in both forms. <a class="no-underline border-b-2 border-darkg" href="https://github.com/ramda/ramda/blob/68535de7f8b1bc0c7848948c3bf998d5da88b85a/source/internal/_curryN.js">At core</a>, <code class="whitespace-nowrap">curry</code> works by looping over the arguments provided and counting them, building up its internal list of arguments. If the function is missing arguments, it returns a new function which takes the remaining arguments; if the number of arguments provided matches the <code class="whitespace-nowrap">length</code> of the function, the underlying function is called. Care needs to be taken in this implementation to ensure the length of the returned function matches the expected remaining arguments, which is done with <a class="no-underline border-b-2 border-darkg" href="https://github.com/ramda/ramda/blob/68535de7f8b1bc0c7848948c3bf998d5da88b85a/source/internal/_arity.js">this nasty-looking internal helper</a>.</p><p class="font-ovo text-xl leading-normal pb-3">With <code class="whitespace-nowrap">curry</code>, functions are free to work both the normal way and the partially applied way, enabling functions not written for functional composition to be composable. <code class="whitespace-nowrap">curry</code> is a bridge between more traditional approaches to functional programming, where currying is built into the language, and JavaScript’s behavior expected behavior.</p><h3 class="mb-5 font-muli text-2xl"><code class="whitespace-nowrap">curry</code> is a suboptimal bridge</h3><p class="font-ovo text-xl leading-normal pb-3">While it does provide <em>a</em> bridge, it’s a bridge that actually exacerbates the divide between functional &amp; mainstream JavaScript. It’s imperfect, attempting to bring functionality to JavaScript not native to the language; it’s one-way, sucking functions into the functional world while giving nothing back; and it’s complicated, making functional programming more difficult for mainstream JavaScript developers. Ultimately, this produces an approach to functional programming that is fundamentally un-JavaScript-y.</p><h4 class="mb-3 font-muli inline-block border-b-2 text-xl"><code class="whitespace-nowrap">curry</code> is an imperfect bridge</h4><p class="font-ovo text-xl leading-normal pb-3">If you’ve been working in functional JavaScript, you’ve probably come across some variations on <code class="whitespace-nowrap">curry</code>: <code class="whitespace-nowrap">curry2</code> &amp; <code class="whitespace-nowrap">curryN</code>. <code class="whitespace-nowrap">curryN</code> takes an additional argument, the <code class="whitespace-nowrap">length</code> of the function, and returns a function that evaluates when that number of arguments have been provided (with <code class="whitespace-nowrap">curry2</code> specifically dealing with functions that take 2 arguments). This is necessary because in JavaScript, using <code class="whitespace-nowrap">length</code> may not mean what you want.</p><p class="font-ovo text-xl leading-normal pb-3">The first example is how default parameters are handled in JavaScript. In the below example, <code class="whitespace-nowrap">sort</code> has a <code class="whitespace-nowrap">length</code> of 1, not 2.</p><div class="mb-b"><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="sort.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span>sort<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token space"> </span>algo<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token string">'bubble'</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>...<span class="token space"> </span>implementation</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>sort.js</span></div></div></div></div><p class="font-ovo text-xl leading-normal pb-3">The default parameter doesn’t count towards the length of the function, so if you want this function to take two arguments before being called, you need to tell it explicitly because JavaScript considers this a function with one argument.</p><p class="font-ovo text-xl leading-normal pb-3">Another pattern this doesn’t work well with is options-bag parameters. The below example isn’t curry-able at all without some significant hoop-jumping:</p><div class="mb-b"><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="api.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span>api<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token space"> </span>url<span class="token punctuation">,</span><span class="token space"> </span>method<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token string">'GET'</span><span class="token punctuation">,</span><span class="token space"> </span>body<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token space"> </span>headers<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>...<span class="token space"> </span>implementation</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>api.js</span></div></div></div></div><p class="font-ovo text-xl leading-normal pb-3">In order to turn these into composable functions, you have to wrap them in functions that take these options one at a time, which can be awkward at best. This gets worse if the second argument is the options-bag argument, with a handful of default arguments applied. None of this is <code class="whitespace-nowrap">curry</code>-able in the traditional sense, and for the most part, is solved by wrapping <code class="whitespace-nowrap">api</code> in an arrow function to make it do what you want. <code class="whitespace-nowrap">curry</code> just isn’t helpful to make this composable.</p><h4 class="mb-3 font-muli inline-block border-b-2 text-xl"><code class="whitespace-nowrap">curry</code> is a one-way bridge</h4><p class="font-ovo text-xl leading-normal pb-3">While <code class="whitespace-nowrap">curry</code> functions as a bridge between the non-functional world and the functional world, it’s really a one-way bridge. Functions that aren’t as easily composable need to be made composable in order to interface with the wider functional ecosystem, but there is no reciprocity.</p><p class="font-ovo text-xl leading-normal pb-3">Taking the above <code class="whitespace-nowrap">sort</code> function as an example, that’s written in an mainstream idiomatic fashion, with the data coming first &amp; the optional, defaulted argument coming second, but to make this composable, you need to make the first argument the algorithm:</p><div class="mb-b"><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="sortCurried.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span>sort<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">curry</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">algo<span class="token punctuation">,</span><span class="token space"> </span>arr</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>...<span class="token space"> </span>implementation<span class="token space"> </span>);</span><span class="token lf">
</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">'bubble'</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token number">214</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token number">23</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>[5,<span class="token space"> </span>6,<span class="token space"> </span>23,<span class="token space"> </span>213]</span><span class="token lf">
</span><span class="token keyword">const</span><span class="token space"> </span>sortBubble<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">'bubble'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>sortCurried.js</span></div></div></div></div><p class="font-ovo text-xl leading-normal pb-3">This is weird! The default is now required, and the data comes second, which is often unexpected. In this case, you could feasibly create a separate function for each algorithm (this is a pretty contrived example, for sure), but for other functions with default values, that might not make sense. You really want to just leave this value out, but making it curried makes writing a mainstream function more difficult. In this case, the default argument is just a string, but what if it’s an options-bag? This gets even stranger and more complex.</p><p class="font-ovo text-xl leading-normal pb-3">All of this means you have to write functions specifically for curried functional composition, and those functions are often unidiomatic for mainstream JavaScript. The <code class="whitespace-nowrap">curry</code> bridge only brings functions <em>into</em> functional JavaScript style; it doesn’t send functions <em>back</em> into mainstream style, and writing mainstream JavaScript often makes it difficult to adopt functional patterns because of this mismatch.</p><h4 class="mb-3 font-muli inline-block border-b-2 text-xl"><code class="whitespace-nowrap">curry</code> is a complicated bridge</h4><p class="font-ovo text-xl leading-normal pb-3">In my experience, while these curried functions &amp; compositions can make for really elegant code once written, debugging them when they go wrong can be… challenging. You lose visibility onto where arguments are actually coming from, pipelines can be difficult to step through in a debugger, and the overall behavior of the system can become opaque without a strong sense of what each underlying function does (do <em>you</em> know what <a class="no-underline border-b-2 border-darkg" href="https://ramdajs.com/docs/#converge"><code class="whitespace-nowrap">converge</code></a> does without looking it up? Do most JavaScript programmers?).</p><p class="font-ovo text-xl leading-normal pb-3">All of this makes functional programming in JavaScript hard for beginners. Even the basic <code class="whitespace-nowrap">add</code> function, while appearing simple, can take a second for new programmers to realize it’s a function <em>that returns a function</em>. Functional composition is an incredibly powerful way of thinking through problems, and functional idioms make bringing that to non-functional programmers more difficult by requiring an understanding of several concepts before they can take advantage of it. There are tools like <a class="no-underline border-b-2 border-darkg" href="https://github.com/sebinsua/ramda-debug"><code class="whitespace-nowrap">ramda-debug</code></a> that make debugging these pipelines easier, but exacerbates the issue of needing to opt into a whole new ecosystem in order to use these tools and deepens the divide between functional &amp; mainstream JavaScript.</p><h4 class="mb-3 font-muli inline-block border-b-2 text-xl">Curried (&amp; point-free) code is un-JavaScript-y</h4><p class="font-ovo text-xl leading-normal pb-3">I’m not the first person to <a class="no-underline border-b-2 border-darkg" href="https://2ality.com/2017/11/currying-in-js.html">point this out</a>. Composing functions in the way described is used widely in functional JavaScript, and (in my experience) rarely outside of it. Every time a beginner runs into code that looks like this:</p><div class="mb-b"><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="doubleThenAdd2.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span>doubleThenAdd2<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token function">doubleThenAdd2</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>12</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>doubleThenAdd2.js</span></div></div></div></div><p class="font-ovo text-xl leading-normal pb-3">there’s like 4+ concepts to learn in order to understand what’s going on here, plus new tools &amp; techniques to verify &amp; debug these compositions. Developers find it <a class="no-underline border-b-2 border-darkg" href="https://hughfdjackson.com/javascript/does-curry-help/">“difficult to grasp and hard to read”</a>, and it takes some time &amp; experience with the style for a function like the above to become intuitive.</p><p class="font-ovo text-xl leading-normal pb-3">Early in my career, I used Ramda extensively and tried to introduce it &amp; its associated concepts to my team. Despite several of them being senior engineers, this took a lot of work to explain and it never became a natural approach for them. I also struggled with debugging my own pipelines in the process and have since abandoned Ramda and its associated technqiues as my utility library of choice.</p><p class="font-ovo text-xl leading-normal pb-3">The overhead of these concepts makes adopting other functional concepts in the wider JavaScript community more difficult because they don’t integrate well into non-functional code without adopting an overall functional style. Both mainstream JavaScript and functional JavaScript in particular suffer as a result, as mainstream JavaScript fails to benefit from functional ideas while functional programming is relegated to playing with its own toys instead of sharing everyone else’s.</p><h2 class="mb-5 font-muli text-3xl">Reject currying; embrace composition</h2><p class="font-ovo text-xl leading-normal pb-3">Bringing a native pipe operator into JavaScript, on its own, will address a lot of these issues. There will no longer be a need for a <code class="whitespace-nowrap">pipe</code> or <code class="whitespace-nowrap">compose</code> function, and the behavior of the pipe is more intuitive than either of those functions could ever be. It literally looks like an arrow! <code class="whitespace-nowrap">x |&gt; func</code><em>looks</em> like “<code class="whitespace-nowrap">x</code> going into <code class="whitespace-nowrap">func</code>”! Right off the bat, we make composition more accessible to programmers new to functional programming.</p><p class="font-ovo text-xl leading-normal pb-3">Additionally, it makes debugging easier. With a pipe integrated into JavaScript, the devtools can more easily add breakpoints in between pipeline steps, inspecting the output of any given step without additional tooling required. This is similar to how you can add a breakpoint to a one-line arrow function right after the arrow, inspecting the callstack &amp; arguments inline. These two features alone make the value of the pipe worth it for the language.</p><p class="font-ovo text-xl leading-normal pb-3">By and large, between the two proposals, most functional programmers prefer the F# proposal. Looking at <code class="whitespace-nowrap">doubleThenAdd2</code> with F# pipe, we see effectively a straight translation of the current usage:</p><div class="mb-b"><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="doubleThenAdd2F#.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">doubleThenAdd2</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token parameter">x</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>x<span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>doubleThenAdd2F#.js</span></div></div></div></div><p class="font-ovo text-xl leading-normal pb-3">Functional programmers have a pretty straightforward translation from their current <code class="whitespace-nowrap">pipe</code> to <code class="whitespace-nowrap">|</code>&gt; because to works like what they’re already used to doing in functional JavaScript. Currying &amp; point-free programming is such a significant part of how functional programmers in JavaScript code that they want a pipe operator that allows them to continue doing that.</p><p class="font-ovo text-xl leading-normal pb-3">But… what if it wasn’t? The Hack pipe version looks like this:</p><div class="mb-b"><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="doubleThenAdd2Hack.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">doubleThenAdd2</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token parameter">x</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>x<span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>doubleThenAdd2Hack.js</span></div></div></div></div><p class="font-ovo text-xl leading-normal pb-3">Now, we no longer even <em>need</em> currying; we can use our base, uncurried <code class="whitespace-nowrap">add</code> function without modification. Because Hack allows arbitrary expressions, rather than functions, this can actually be even simpler:</p><div class="mb-b"><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="doubleThenAdd2HackNoFunc.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">doubleThenAdd2</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token parameter">x</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>x<span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token number">2</span><span class="token space"> </span><span class="token operator">*</span><span class="token space"> </span><span class="token operator">^</span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token number">2</span><span class="token space"> </span><span class="token operator">+</span><span class="token space"> </span><span class="token operator">^</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>doubleThenAdd2HackNoFunc.js</span></div></div></div></div><p class="font-ovo text-xl leading-normal pb-3">We don’t even need functional versions of these operators! We can compose <em>operators</em>, not just functions, without needing to introduce or write a whole library for them.</p><p class="font-ovo text-xl leading-normal pb-3">The entire world of non-curried libraries get opened up to functional composition. We no longer need <code class="whitespace-nowrap">lodash/fp</code> as a curried alternative to the base <code class="whitespace-nowrap">lodash</code> functions because the base <code class="whitespace-nowrap">lodash</code> functions work <em>just fine</em> in the pipe. The Web platform as a whole is now available to functional programmers directly. <code class="whitespace-nowrap">fetch</code> doesn’t need a special wrapper to handle its options bag; you don’t need to dive into <code class="whitespace-nowrap">date-fns/fp</code> when <a class="no-underline border-b-2 border-darkg" href="https://tc39.es/proposal-temporal/docs/"><code class="whitespace-nowrap">Temporal</code></a> can compose; the entire DOM can be manipulated in a pipeline just like everything else, without wrapping every step in an arrow function! Even future proposals, like <a class="no-underline border-b-2 border-darkg" href="https://github.com/tc39/proposal-record-tuple">Records &amp; Tuples</a>, could possibly be getting <em>syntax</em> for <a class="no-underline border-b-2 border-darkg" href="https://github.com/tc39/proposal-record-tuple">deep path property setting</a>, which works better with Hack’s expression-based operator.</p><p class="font-ovo text-xl leading-normal pb-3">What’s more, this operator is <em>much</em> easier to understand than <code class="whitespace-nowrap">curry</code>. Beginning programmers understand expressions; they may not call them that, but they know how <code class="whitespace-nowrap">x + 1</code> and <code class="whitespace-nowrap">await fetch()</code> work &amp; behave. With Hack pipe, there are a bunch of concepts that are no longer necessary to learn in order to start taking advantage of composition.</p><p class="font-ovo text-xl leading-normal pb-3">Functional programmers can stop explaining currying &amp; point-free programming and focus on bring other functional features into the code people write every day. Mainstream JavaScript can start to use constructs like <code class="whitespace-nowrap">Maybe</code> &amp; <code class="whitespace-nowrap">Either</code>, both of which I’ve found to be quite useful and introduce regularly in non-functional JavaScript, especially for wrapping promises. Being able to buy into these concepts without the overhead of currying &amp; point-free programming would be a great benefit to the wider JavaScript community and much easier for beginner programmers to understand &amp; use on their own.</p><p class="font-ovo text-xl leading-normal pb-3">The Hack pipe is thus <strong>good for functional programming</strong>: it bridges the divide between the functional programming community &amp; the wider JavaScript community. A whole category of interop tooling goes away in favor of a native operator that both mainstream &amp; functional JavaScript can take advantage of.</p><h2 class="mb-5 font-muli text-3xl">The future of functional programming is Hack pipe</h2><p class="font-ovo text-xl leading-normal pb-3">With the most recent TC39 meeting, the Hack pipe advanced to Stage 2. I expect this news, especially given my long-standing preference for F#, to cause some consternation amongst the F# adherents and their functional preferences. However, <strong>Hack is a win for functional programming in JavaScript, even if it means giving up some time-honored functional traditions.</strong></p><p class="font-ovo text-xl leading-normal pb-3">It will definitely take some time for the ecosystem to adapt to the introduction of Hack pipe, although curried functions can take advantage of the pipe operator as-is.</p><div class="mb-b"><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="curriedWithHack.js"><code class="language-js"><span class="token comment">//<span class="token space"> </span>Without<span class="token space"> </span>`curry`</span><span class="token lf">
</span><span class="token number">1</span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token comment">//<span class="token space"> </span>With<span class="token space"> </span>`curry`</span><span class="token lf">
</span><span class="token number">1</span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token operator">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>curriedWithHack.js</span></div></div></div></div><p class="font-ovo text-xl leading-normal pb-3">Some algebraic data types that work well with the Hack pipe operator, support tree-shaking, &amp; are comprehensible to beginners would go a long way towards making functional programming more idiomatic in non-functional contexts, decoupling them from more complicated functional approaches to solving problems.</p><p class="font-ovo text-xl leading-normal pb-3">Functional programming in JavaScript has long adopted techniques and tools from other functional languages; this is why currying &amp; point-free programming have become so popular in functional JavaScript. But JavaScript isn’t Haskell, and currying isn’t built-in to JavaScript, so its adoption will always be a bit unnatural by comparison. We should adopt a pipe operator that feels native to JavaScript, and adapt our techniques for more natural functional JavaScript for the masses.</p></section></article></div></main></div></div></div></div>