<div id="__next"><div class="flex flex-row"><div class="print:hidden h-screen w-0 xl:w-88" style="width: 351.983px;"><header class="flex flex-col print:hidden fixed h-screen overflow-hidden w-inherit"><div class="h-screen overflow-hidden relative"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:absolute;top:0;left:0;bottom:0;right:0"><img alt="background image" sizes="100vw" srcset="/_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=640&amp;q=75 640w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=750&amp;q=75 750w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=828&amp;q=75 828w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=1080&amp;q=75 1080w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=1200&amp;q=75 1200w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=1920&amp;q=75 1920w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=2048&amp;q=75 2048w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=3840&amp;q=75 3840w" src="/_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=3840&amp;q=75" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;object-position:center center"><noscript><img alt="background image" sizes="100vw" srcSet="/_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=640&amp;q=75 640w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=750&amp;q=75 750w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=828&amp;q=75 828w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=1080&amp;q=75 1080w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=1200&amp;q=75 1200w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=1920&amp;q=75 1920w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=2048&amp;q=75 2048w, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=3840&amp;q=75 3840w" src="/_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2020%2F11%2Fheader-1.jpg&amp;w=3840&amp;q=75" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;object-position:center center" loading="lazy"/></noscript></span></div><div class="absolute bg-etched rounded-lg text-center inline-flex lg:flex flex-row items-center justify-center lg:justify-start w-full max-w-xs sm:max-w-sm lg:max-w-md pin-center -mt-8 m-auto w-full"><div class="flex flex-row items-center justify-center w-full p-2"><div class="w-0 lg:w-48 h-48 rounded-full overflow-hidden flex-grow-0 transition-width ease-in-out lg:w-0"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYwIiBoZWlnaHQ9IjM2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="></span><img alt="avatar" srcset="/_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2015%2F02%2Fnew-avatar-sq.jpg&amp;w=384&amp;q=75 1x, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2015%2F02%2Fnew-avatar-sq.jpg&amp;w=750&amp;q=75 2x" src="/_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2015%2F02%2Fnew-avatar-sq.jpg&amp;w=750&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"><noscript><img alt="avatar" srcSet="/_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2015%2F02%2Fnew-avatar-sq.jpg&amp;w=384&amp;q=75 1x, /_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2015%2F02%2Fnew-avatar-sq.jpg&amp;w=750&amp;q=75 2x" src="/_next/image/?url=https%3A%2F%2Fstatic.jamesdigioia.com%2Fuploads%2F2015%2F02%2Fnew-avatar-sq.jpg&amp;w=750&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div><div class="font-muli lg:ml-5 flex-grow"><div class="text-4xl lg:text-5xl font-bold font-muli mb-3" data-typeit-id="3131015">James DiGioia<span class="ti-cursor" style="visibility: hidden;"></span></div><div class="text-xl md:text-3xl mb-3 flex flex-row align-center justify-center text-center"><a class="border-2 border-transparent focus:border-primary focus:outline-none" href="https://www.facebook.com/james.digioia" target="_blank" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="text-4xl" style="color:#3b5998" alt="Facebook" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg></a><a class="border-2 border-transparent focus:border-primary focus:outline-none" href="https://www.linkedin.com/in/jamesdigioia" target="_blank" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="text-4xl" style="color:#4875b4" alt="LinkedIn" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a><a class="border-2 border-transparent focus:border-primary focus:outline-none" href="https://github.com/mAAdhaTTah/" target="_blank" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="text-4xl" style="color:#333" alt="GitHub" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"></path></svg></a></div><div class="relative text-xl lg:text-3xl" data-typeit-id="8608355">my little web home<span class="ti-cursor" style="visibility: hidden;"></span></div></div></div></div></header><div class="fixed top-2 left-2 z-50"><button class="rounded-full bg-darkg text-secondary p-1 border-2 border-darkg focus:outline-none focus:border-lightg"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="text-lg" alt="" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"></path></svg><div style="border:0;clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;margin:0 -1px -1px 0;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap">Open menu</div></button></div></div><div class="relative flex-grow"><div style="opacity:1" class="absolute w-full"><main class="mx-4 pt-5 print:pt-0 print:mx-0 print:max-w-full"><article class="p-5 flow-root rounded pb-3 mb-5 max-w-xl mx-auto bg-primary"><h3 class="text-4xl text-lightg font-muli mb-3"><a href="/gistpens/functional-hack/">Functional Hack</a></h3><div class="entry-meta my-2 flex items-center rounded bg-secondary p-3 mb-3"><time class="font-body published" datetime="2021-08-15 14:58:51">August 15th, 2021</time><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mx-3 w-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><p class="font-body">James DiGioia</p></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="add.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">add</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token parameter">a</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token parameter">b</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>a<span class="token space"> </span><span class="token operator">+</span><span class="token space"> </span>b<span class="token punctuation">;</span><span class="token lf">
</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>3</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>add.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="doubleThenAdd2.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span>doubleThenAdd2<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token function">doubleThenAdd2</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>12</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>doubleThenAdd2.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="addCallNormal.js"><code class="language-js"><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>b<span class="token space"> </span>=&gt;<span class="token space"> </span>1<span class="token space"> </span>+<span class="token space"> </span>b;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>addCallNormal.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="curriedAdd.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span>add<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">curry</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span><span class="token space"> </span>b</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>a<span class="token space"> </span><span class="token operator">+</span><span class="token space"> </span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>b<span class="token space"> </span>=&gt;<span class="token space"> </span>1<span class="token space"> </span>+<span class="token space"> </span>b;</span><span class="token lf">
</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>3</span><span class="token lf">
</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>3</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>curriedAdd.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="sort.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span>sort<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token space"> </span>algo<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token string">'bubble'</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>...<span class="token space"> </span>implementation</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>sort.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="api.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span>api<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token space"> </span>url<span class="token punctuation">,</span><span class="token space"> </span>method<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token string">'GET'</span><span class="token punctuation">,</span><span class="token space"> </span>body<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token space"> </span>headers<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>...<span class="token space"> </span>implementation</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>api.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="sortCurried.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span>sort<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">curry</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">algo<span class="token punctuation">,</span><span class="token space"> </span>arr</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>...<span class="token space"> </span>implementation<span class="token space"> </span>);</span><span class="token lf">
</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">'bubble'</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token number">214</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token number">23</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>[5,<span class="token space"> </span>6,<span class="token space"> </span>23,<span class="token space"> </span>213]</span><span class="token lf">
</span><span class="token keyword">const</span><span class="token space"> </span>sortBubble<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">'bubble'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>sortCurried.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="doubleThenAdd2F#.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">doubleThenAdd2</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token parameter">x</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>x<span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>doubleThenAdd2F#.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="doubleThenAdd2Hack.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">doubleThenAdd2</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token parameter">x</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>x<span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>doubleThenAdd2Hack.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="doubleThenAdd2HackNoFunc.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">doubleThenAdd2</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token parameter">x</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>x<span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token number">2</span><span class="token space"> </span><span class="token operator">*</span><span class="token space"> </span><span class="token operator">^</span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token number">2</span><span class="token space"> </span><span class="token operator">+</span><span class="token space"> </span><span class="token operator">^</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>doubleThenAdd2HackNoFunc.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="curriedWithHack.js"><code class="language-js"><span class="token comment">//<span class="token space"> </span>Without<span class="token space"> </span>`curry`</span><span class="token lf">
</span><span class="token number">1</span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token comment">//<span class="token space"> </span>With<span class="token space"> </span>`curry`</span><span class="token lf">
</span><span class="token number">1</span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token operator">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>curriedWithHack.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="deepSetRecord.js"><code class="language-js"><span class="token comment">//<span class="token space"> </span>From<span class="token space"> </span>the<span class="token space"> </span>README,<span class="token space"> </span>w/<span class="token space"> </span>Hack<span class="token space"> </span>pipe</span><span class="token lf">
</span><span class="token keyword">const</span><span class="token space"> </span>updated<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span>state<span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span>#<span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token operator">...</span><span class="token operator">^</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>counters<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token operator">:</span><span class="token space"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>counters<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token operator">:</span><span class="token space"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>metadata<span class="token punctuation">.</span>lastUpdate<span class="token operator">:</span><span class="token space"> </span><span class="token number">1584383011300</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token function">assert</span><span class="token punctuation">(</span>updated<span class="token punctuation">.</span>counters<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token space"> </span><span class="token operator">===</span><span class="token space"> </span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token function">assert</span><span class="token punctuation">(</span>updated<span class="token punctuation">.</span>counters<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token space"> </span><span class="token operator">===</span><span class="token space"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token function">assert</span><span class="token punctuation">(</span>updated<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>lastUpdate<span class="token space"> </span><span class="token operator">===</span><span class="token space"> </span><span class="token number">1584383011300</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>deepSetRecord.js</span></div></div></div></article><article class="p-5 flow-root rounded pb-3 mb-5 max-w-xl mx-auto bg-primary"><h3 class="text-4xl text-lightg font-muli mb-3"><a href="/gistpens/objects-for-related-optional-props/">Objects for related optional props</a></h3><div class="entry-meta my-2 flex items-center rounded bg-secondary p-3 mb-3"><time class="font-body published" datetime="2021-05-15 21:33:23">May 15th, 2021</time><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mx-3 w-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><p class="font-body">James DiGioia</p></div><div class="code-toolbar"><pre class="line-numbers language-jsx" data-filename="CardNaive.js"><code class="language-jsx"><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">Card</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span><span class="token space"> </span>heading<span class="token punctuation">,</span><span class="token space"> </span>description<span class="token punctuation">,</span><span class="token space"> </span>imageSrc<span class="token space"> </span><span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      {imageSrc &amp;&amp; </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>imageSrc<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">}
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-heading<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">{heading}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-description<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">{description}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span>Card<span class="token punctuation">.</span>propTypes<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>heading<span class="token operator">:</span><span class="token space"> </span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>description<span class="token operator">:</span><span class="token space"> </span>PropTypes<span class="token punctuation">.</span>description<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>imageSrc<span class="token operator">:</span><span class="token space"> </span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>CardNaive.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-jsx" data-filename="add-alt.js"><code class="language-jsx"><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">Card</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span><span class="token space"> </span>heading<span class="token punctuation">,</span><span class="token space"> </span>description<span class="token punctuation">,</span><span class="token space"> </span>imageSrc<span class="token punctuation">,</span><span class="token space"> </span>imageAlt<span class="token space"> </span><span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      {imageSrc &amp;&amp; </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>imageSrc<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>imageAlt<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">}
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-heading<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">{heading}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-description<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">{description}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span>Card<span class="token punctuation">.</span>propTypes<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>heading<span class="token operator">:</span><span class="token space"> </span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>description<span class="token operator">:</span><span class="token space"> </span>PropTypes<span class="token punctuation">.</span>description<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>imageSrc<span class="token operator">:</span><span class="token space"> </span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>imageAlt<span class="token operator">:</span><span class="token space"> </span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>add-alt.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-jsx" data-filename="img-obj-prop.js"><code class="language-jsx"><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">Card</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span><span class="token space"> </span>heading<span class="token punctuation">,</span><span class="token space"> </span>description<span class="token punctuation">,</span><span class="token space"> </span>imageSrc<span class="token punctuation">,</span><span class="token space"> </span>imageAlt<span class="token space"> </span><span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      {imageSrc &amp;&amp; </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>imageSrc<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>imageAlt<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">}
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-heading<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">{heading}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-description<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">{description}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span>Card<span class="token punctuation">.</span>propTypes<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>heading<span class="token operator">:</span><span class="token space"> </span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>description<span class="token operator">:</span><span class="token space"> </span>PropTypes<span class="token punctuation">.</span>description<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>imageSrc<span class="token operator">:</span><span class="token space"> </span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>imageAlt<span class="token operator">:</span><span class="token space"> </span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>img-obj-prop.js</span></div></div></div></article><article class="p-5 flow-root rounded pb-3 mb-5 max-w-xl mx-auto bg-primary"><h3 class="text-4xl text-lightg font-muli mb-3"><a href="/gistpens/top-level-modules/">Top-Level Modules</a></h3><div class="entry-meta my-2 flex items-center rounded bg-secondary p-3 mb-3"><time class="font-body published" datetime="2021-01-16 20:47:23">January 16th, 2021</time><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mx-3 w-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><p class="font-body">James DiGioia</p></div><div class="code-toolbar"><pre class="line-numbers language-jsx" data-filename="WidgetView.jsx"><code class="language-jsx"><span class="token keyword">import</span><span class="token space"> </span>React<span class="token space"> </span><span class="token keyword">from</span><span class="token space"> </span><span class="token string">'react'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token keyword">import</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>getWidgets<span class="token punctuation">,</span><span class="token space"> </span>createWidget<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token keyword">from</span><span class="token space"> </span><span class="token string">'../widget'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">export</span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">WidgetView</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span><span class="token space"> </span>widgets<span class="token space"> </span><span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token punctuation">[</span>widgets<span class="token punctuation">,</span><span class="token space"> </span>setWidgets<span class="token punctuation">]</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function">getWidgets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">widgets</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token function">setWidgets</span><span class="token punctuation">(</span>widgets<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">onButtonClick</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token keyword">async</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">await</span><span class="token space"> </span><span class="token function">createWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>widgets<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token keyword">await</span><span class="token space"> </span><span class="token function">getWidgets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function">setWidget</span><span class="token punctuation">(</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        {widgets.map(widget =&gt; (
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>widget<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">{widget.name}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        ))}
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">  
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onButtonClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Add widget</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token space"> </span><span class="token space"> </span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>WidgetView.jsx</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="index.js"><code class="language-js"><span class="token comment">//<span class="token space"> </span>src/widget/index.js</span><span class="token lf">
</span><span class="token keyword">export</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>Widget<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token keyword">from</span><span class="token space"> </span><span class="token string">'./Widget.js'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token keyword">export</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>getWidgets<span class="token punctuation">,</span><span class="token space"> </span>createWidget<span class="token punctuation">,</span><span class="token space"> </span>updateWidget<span class="token punctuation">,</span><span class="token space"> </span>deleteWidget<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token keyword">from</span><span class="token space"> </span><span class="token string">'./api.js'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token keyword">export</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>encoder<span class="token punctuation">,</span><span class="token space"> </span>decoder<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token keyword">from</span><span class="token space"> </span><span class="token string">'./schema.js'</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>index.js</span></div></div></div></article><article class="p-5 flow-root rounded pb-3 mb-5 max-w-xl mx-auto bg-primary"><h3 class="text-4xl text-lightg font-muli mb-3"><a href="/gistpens/yuptypes/">yuptypes</a></h3><div class="entry-meta my-2 flex items-center rounded bg-secondary p-3 mb-3"><time class="font-body published" datetime="2020-09-18 15:21:04">September 18th, 2020</time><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mx-3 w-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><p class="font-body">James DiGioia</p></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="yuptypes.js"><code class="language-js"><span class="token keyword">export</span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">yuptypes</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token parameter">schema</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>propTypes<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">for</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token keyword">const</span><span class="token space"> </span>key<span class="token space"> </span><span class="token keyword">in</span><span class="token space"> </span>schema<span class="token punctuation">.</span>fields<span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>propTypes<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token keyword">function</span><span class="token space"> </span><span class="token function">checkYupSchema</span><span class="token punctuation">(</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token parameter">props<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>propName<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>componentName<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>location<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>propFullName<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>secret</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">try</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>schema<span class="token punctuation">.</span><span class="token function">validateSyncAt</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span><span class="token space"> </span>props<span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>strict<span class="token operator">:</span><span class="token space"> </span><span class="token boolean">true</span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token keyword">catch</span><span class="token space"> </span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token keyword">new</span><span class="token space"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Invalid<span class="token space"> </span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>location<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><span class="token space"> </span></span><span class="token template-punctuation string">`</span></span>$<span class="token punctuation">{</span>propName<span class="token punctuation">}</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><span class="token space"> </span>supplied<span class="token space"> </span>to<span class="token space"> </span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>componentName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>err<span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>key<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token string">""</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span>propTypes<span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>yuptypes.js</span></div></div></div></article><article class="p-5 flow-root rounded pb-3 mb-5 max-w-xl mx-auto bg-primary"><h3 class="text-4xl text-lightg font-muli mb-3"><a href="/gistpens/useeffect-dependency-array-issues/">useEffect dependency array issues</a></h3><div class="entry-meta my-2 flex items-center rounded bg-secondary p-3 mb-3"><time class="font-body published" datetime="2020-07-03 13:31:45">July 3rd, 2020</time><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mx-3 w-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><p class="font-body">James DiGioia</p></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="useEffect-issue.js"><code class="language-js"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function">refreshCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>useEffect-issue.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="refreshCart.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">refreshCart</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>api<span class="token punctuation">.</span><span class="token function">getCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">cart</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token function">setState</span><span class="token punctuation">(</span>cart<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>refreshCart.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="refreshCart-useCallback.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span>refreshCart<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>api<span class="token punctuation">.</span><span class="token function">getCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">cart</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token function">setState</span><span class="token punctuation">(</span>cart<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>refreshCart-useCallback.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="refreshCartRef.js"><code class="language-js"><span class="token keyword">const</span><span class="token space"> </span>refreshCartRef<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">if</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token operator">!</span>refreshCartRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>refreshCartRef<span class="token punctuation">.</span><span class="token function-variable function">current</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>api<span class="token punctuation">.</span><span class="token function">getCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">cart</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token function">setState</span><span class="token punctuation">(</span>cart<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token lf">
</span><span class="token lf">
</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>refreshCartRef<span class="token punctuation">.</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>refreshCartRef.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="refreshCart-eslint-disable.js"><code class="language-js"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function">refreshCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>refreshCart<span class="token space"> </span>is<span class="token space"> </span>recreated<span class="token space"> </span>fresh,<span class="token space"> </span>but<span class="token space"> </span>we<span class="token space"> </span>only<span class="token space"> </span>want<span class="token space"> </span>to</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>do<span class="token space"> </span>this<span class="token space"> </span>on<span class="token space"> </span>initial<span class="token space"> </span>render,<span class="token space"> </span>so<span class="token space"> </span>we're<span class="token space"> </span>going<span class="token space"> </span>to<span class="token space"> </span>provide</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>an<span class="token space"> </span>empty<span class="token space"> </span>array<span class="token space"> </span>here<span class="token space"> </span>so<span class="token space"> </span>it<span class="token space"> </span>only<span class="token space"> </span>runs<span class="token space"> </span>once.</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>eslint-disable-next-line<span class="token space"> </span>react-hooks/exhaustive-deps</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>refreshCart-eslint-disable.js</span></div></div></div></article><article class="p-5 flow-root rounded pb-3 mb-5 max-w-xl mx-auto bg-primary"><h3 class="text-4xl text-lightg font-muli mb-3"><a href="/gistpens/typescript-unknown-with-kefir-ajax/">TypeScript unknown with kefir-ajax</a></h3><div class="entry-meta my-2 flex items-center rounded bg-secondary p-3 mb-3"><time class="font-body published" datetime="2020-07-03 11:57:29">July 3rd, 2020</time><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mx-3 w-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><p class="font-body">James DiGioia</p></div><div class="code-toolbar"><pre class="line-numbers language-typescript" data-filename="validate.js"><code class="language-typescript"><span class="token function">ajax$</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>response<span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>body<span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>body<span class="token space"> </span>is<span class="token space"> </span>`unknown`</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>ResponseType<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">fold</span><span class="token generic class-name"><span class="token operator">&lt;</span>Observable<span class="token operator">&lt;</span>ResponseType<span class="token punctuation">,</span><span class="token space"> </span>t<span class="token punctuation">.</span>Error<span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>Kefir<span class="token punctuation">.</span>constantError<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>Kefir<span class="token punctuation">.</span>constant<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">)</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>validate.js</span></div></div></div></article><article class="p-5 flow-root rounded pb-3 mb-5 max-w-xl mx-auto bg-primary"><h3 class="text-4xl text-lightg font-muli mb-3"><a href="/gistpens/component-render-function/">Component Render Function</a></h3><div class="entry-meta my-2 flex items-center rounded bg-secondary p-3 mb-3"><time class="font-body published" datetime="2020-04-26 13:50:45">April 26th, 2020</time><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mx-3 w-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><p class="font-body">James DiGioia</p></div><div class="code-toolbar"><pre class="line-numbers language-jsx" data-filename="form.js"><code class="language-jsx"><span class="token keyword">import</span><span class="token space"> </span>React<span class="token space"> </span><span class="token keyword">from</span><span class="token space"> </span><span class="token string">'react'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">export</span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">Form</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span><span class="token space"> </span>submit<span class="token space"> </span><span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token punctuation">[</span>value<span class="token punctuation">,</span><span class="token space"> </span>setValue<span class="token punctuation">]</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">onSubmit</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">if</span><span class="token space"> </span><span class="token punctuation">(</span>value<span class="token space"> </span><span class="token operator">===</span><span class="token space"> </span><span class="token string">''</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function">submit</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onSubmit<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">htmlFor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>input<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Type</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>input<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">e</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token function">setValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Submit</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  );
};</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>form.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-jsx" data-filename="form.spec.js"><code class="language-jsx"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Form'</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should<span class="token space"> </span>not<span class="token space"> </span>submit<span class="token space"> </span>the<span class="token space"> </span>form<span class="token space"> </span>with<span class="token space"> </span>an<span class="token space"> </span>empty<span class="token space"> </span>value'</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>submit<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span>jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>getByText<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span> <span class="token attr-name">submit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>submit<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>fireEvent<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">'Submit'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function">expect</span><span class="token punctuation">(</span>submit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should<span class="token space"> </span>submit<span class="token space"> </span>the<span class="token space"> </span>form<span class="token space"> </span>with<span class="token space"> </span>value'</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>submit<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span>jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>value<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token string">'a<span class="token space"> </span>value'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>getByText<span class="token punctuation">,</span><span class="token space"> </span>getByLabelText<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span> <span class="token attr-name">submit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>submit<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>fireEvent<span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token function">getByLabelText</span><span class="token punctuation">(</span><span class="token string">'Type'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>target<span class="token operator">:</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>value<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>fireEvent<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">'Submit'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function">expect</span><span class="token punctuation">(</span>submit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function">expect</span><span class="token punctuation">(</span>submit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledWith</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>form.spec.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-jsx" data-filename="renderForm.js"><code class="language-jsx"><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">renderForm</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token parameter">props</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>getByText<span class="token punctuation">,</span><span class="token space"> </span>getByLabelText<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">getButton</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">'Submit'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">getInput</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token function">getByLabelText</span><span class="token punctuation">(</span><span class="token string">'Type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">fireButtonClick</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>fireEvent<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token function">getButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">fireInputChange</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token parameter">value</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>fireEvent<span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token function">getInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>target<span class="token operator">:</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>value<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>getButton<span class="token punctuation">,</span><span class="token space"> </span>getInput<span class="token punctuation">,</span><span class="token space"> </span>fireButtonClick<span class="token punctuation">,</span><span class="token space"> </span>fireInputChange<span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>renderForm.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-jsx" data-filename="Form-with-renderForm.spec.js"><code class="language-jsx"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Form'</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should<span class="token space"> </span>not<span class="token space"> </span>submit<span class="token space"> </span>the<span class="token space"> </span>form<span class="token space"> </span>with<span class="token space"> </span>an<span class="token space"> </span>empty<span class="token space"> </span>value'</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>submit<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span>jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>fireButtonClick<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">renderForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token space"> </span>submit<span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function">fireButtonClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function">expect</span><span class="token punctuation">(</span>submit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should<span class="token space"> </span>submit<span class="token space"> </span>the<span class="token space"> </span>form<span class="token space"> </span>with<span class="token space"> </span>value'</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>submit<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span>jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>value<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token string">'a<span class="token space"> </span>value'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>fireInputChange<span class="token punctuation">,</span><span class="token space"> </span>fireButtonClick<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">renderForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token space"> </span>submit<span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function">fireInputChange</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function">fireButtonClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function">expect</span><span class="token punctuation">(</span>submit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function">expect</span><span class="token punctuation">(</span>submit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledWith</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>Form-with-renderForm.spec.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-jsx" data-filename="Form-extra-test.spec.js"><code class="language-jsx"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should<span class="token space"> </span>not<span class="token space"> </span>submit<span class="token space"> </span>the<span class="token space"> </span>form<span class="token space"> </span>if<span class="token space"> </span>value<span class="token space"> </span>changed<span class="token space"> </span>to<span class="token space"> </span>empty<span class="token space"> </span>string'</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>submit<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span>jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>value<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token string">'a<span class="token space"> </span>value'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>fireInputChange<span class="token punctuation">,</span><span class="token space"> </span>fireButtonClick<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">renderForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token space"> </span>submit<span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function">fireInputChange</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function">fireInputChange</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function">fireButtonClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function">expect</span><span class="token punctuation">(</span>submit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>Form-extra-test.spec.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-jsx" data-filename="renderForm-rtk.js"><code class="language-jsx"><span class="token keyword">const</span><span class="token space"> </span>renderForm<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">createRender</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function-variable function">defaultProps</span><span class="token operator">:</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token space"> </span>submit<span class="token operator">:</span><span class="token space"> </span>jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>component<span class="token operator">:</span><span class="token space"> </span>Form<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function-variable function">elements</span><span class="token operator">:</span><span class="token space"> </span><span class="token parameter">queries</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function-variable function">button</span><span class="token operator">:</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>queries<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">'Submit'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function-variable function">input</span><span class="token operator">:</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>queries<span class="token punctuation">.</span><span class="token function">getByLabelText</span><span class="token punctuation">(</span><span class="token string">'Type'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function-variable function">fire</span><span class="token operator">:</span><span class="token space"> </span><span class="token parameter">elements</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function-variable function">buttonClick</span><span class="token operator">:</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>fireEvent<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>elements<span class="token punctuation">.</span><span class="token function">button</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function-variable function">inputChange</span><span class="token operator">:</span><span class="token space"> </span><span class="token parameter">value</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>fireEvent<span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span>elements<span class="token punctuation">.</span><span class="token function">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>target<span class="token operator">:</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>value<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>renderForm-rtk.js</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-jsx" data-filename="Form-rtk.spec.js"><code class="language-jsx"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should<span class="token space"> </span>not<span class="token space"> </span>submit<span class="token space"> </span>the<span class="token space"> </span>form<span class="token space"> </span>if<span class="token space"> </span>value<span class="token space"> </span>changed<span class="token space"> </span>to<span class="token space"> </span>empty<span class="token space"> </span>string'</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>value<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token string">'a<span class="token space"> </span>value'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>fire<span class="token punctuation">,</span><span class="token space"> </span>props<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">renderForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>fire<span class="token punctuation">.</span><span class="token function">inputChange</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>fire<span class="token punctuation">.</span><span class="token function">inputChange</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>fire<span class="token punctuation">.</span><span class="token function">buttonClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function">expect</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>submit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>Form-rtk.spec.js</span></div></div></div></article><article class="p-5 flow-root rounded pb-3 mb-5 max-w-xl mx-auto bg-primary"><h3 class="text-4xl text-lightg font-muli mb-3"><a href="/gistpens/pipe-dom/">pipe-dom</a></h3><div class="entry-meta my-2 flex items-center rounded bg-secondary p-3 mb-3"><time class="font-body published" datetime="2019-07-13 16:46:52">July 13th, 2019</time><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mx-3 w-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><p class="font-body">James DiGioia</p></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="example.js"><code class="language-js"><span class="token keyword">import</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>query<span class="token punctuation">,</span><span class="token space"> </span>addClass<span class="token punctuation">,</span><span class="token space"> </span>append<span class="token punctuation">,</span><span class="token space"> </span>on<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token keyword">from</span><span class="token space"> </span><span class="token string">'pipe-dom'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'important-list'</span><span class="token punctuation">)</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">append</span><span class="token punctuation">(</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'important-item'</span><span class="token punctuation">)</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token operator">|</span><span class="token operator">&gt;</span><span class="token space"> </span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'item<span class="token space"> </span>clicked'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token lf">
</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>example.js</span></div></div></div></article><article class="p-5 flow-root rounded pb-3 mb-5 max-w-xl mx-auto bg-primary"><h3 class="text-4xl text-lightg font-muli mb-3"><a href="/gistpens/tagged-unions-loading-state/">Tagged Unions &amp; Loading State</a></h3><div class="entry-meta my-2 flex items-center rounded bg-secondary p-3 mb-3"><time class="font-body published" datetime="2019-06-30 13:59:30">June 30th, 2019</time><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mx-3 w-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><p class="font-body">James DiGioia</p></div><div class="code-toolbar"><pre class="line-numbers language-typescript" data-filename="array-error-state.ts"><code class="language-typescript"><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">State</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>items<span class="token operator">:</span><span class="token space"> </span>Item<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>error<span class="token operator">:</span><span class="token space"> </span>Error<span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">const</span><span class="token space"> </span>initialState<span class="token operator">:</span><span class="token space"> </span>State<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>items<span class="token operator">:</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>error<span class="token operator">:</span><span class="token space"> </span><span class="token keyword">null</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">const</span><span class="token space"> </span>successState<span class="token operator">:</span><span class="token space"> </span>State<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>items<span class="token operator">:</span><span class="token space"> </span>response<span class="token punctuation">.</span>data<span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>error<span class="token operator">:</span><span class="token space"> </span><span class="token keyword">null</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">const</span><span class="token space"> </span>errorState<span class="token operator">:</span><span class="token space"> </span>State<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>items<span class="token operator">:</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>error<span class="token operator">:</span><span class="token space"> </span>response<span class="token punctuation">.</span>error<span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>array-error-state.ts</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-typescript" data-filename="array-error-conditional.ts"><code class="language-typescript"><span class="token keyword">if</span><span class="token space"> </span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>items<span class="token space"> </span><span class="token operator">===</span><span class="token space"> </span><span class="token keyword">null</span><span class="token space"> </span><span class="token operator">&amp;&amp;</span><span class="token space"> </span>state<span class="token punctuation">.</span>error<span class="token space"> </span><span class="token operator">===</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token operator">&lt;</span>UnloadedView<span class="token space"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">if</span><span class="token space"> </span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>items<span class="token space"> </span><span class="token operator">!==</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token operator">&lt;</span>LoadedView<span class="token space"> </span>items<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>items<span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token lf">
</span><span class="token lf">
</span><span class="token comment">//<span class="token space"> </span>We<span class="token space"> </span>can<span class="token space"> </span>assume<span class="token space"> </span>we're<span class="token space"> </span>in<span class="token space"> </span>the<span class="token space"> </span>error<span class="token space"> </span>state<span class="token space"> </span>now</span><span class="token lf">
</span><span class="token keyword">return</span><span class="token space"> </span><span class="token operator">&lt;</span>ErrorView<span class="token space"> </span>error<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>error<span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>array-error-conditional.ts</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-typescript" data-filename="status-state.ts"><code class="language-typescript"><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">State</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>status<span class="token operator">:</span><span class="token space"> </span><span class="token string">'unloaded'</span><span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span><span class="token string">'loading'</span><span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span><span class="token string">'loaded'</span><span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span><span class="token string">'error'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>items<span class="token operator">:</span><span class="token space"> </span>Item<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>error<span class="token operator">:</span><span class="token space"> </span>Error<span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">const</span><span class="token space"> </span>defaultState<span class="token operator">:</span><span class="token space"> </span>State<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>status<span class="token operator">:</span><span class="token space"> </span><span class="token string">'unloaded'</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>items<span class="token operator">:</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>error<span class="token operator">:</span><span class="token space"> </span><span class="token keyword">null</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>status-state.ts</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-typescript" data-filename="array-error-loading.ts"><code class="language-typescript"><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">State</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>loading<span class="token operator">:</span><span class="token space"> </span><span class="token builtin">boolean</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>items<span class="token operator">:</span><span class="token space"> </span>Item<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>error<span class="token operator">:</span><span class="token space"> </span>Error<span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">const</span><span class="token space"> </span>defaultState<span class="token operator">:</span><span class="token space"> </span>State<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>loading<span class="token operator">:</span><span class="token space"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>items<span class="token operator">:</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>error<span class="token operator">:</span><span class="token space"> </span><span class="token keyword">null</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>array-error-loading.ts</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-typescript" data-filename="array-error-loading-conditional.ts"><code class="language-typescript"><span class="token keyword">if</span><span class="token space"> </span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>loading<span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token operator">&lt;</span>LoadingView<span class="token space"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">if</span><span class="token space"> </span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>items<span class="token space"> </span><span class="token operator">===</span><span class="token space"> </span><span class="token keyword">null</span><span class="token space"> </span><span class="token operator">&amp;&amp;</span><span class="token space"> </span>state<span class="token punctuation">.</span>error<span class="token space"> </span><span class="token operator">===</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token operator">&lt;</span>UnloadedView<span class="token space"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">if</span><span class="token space"> </span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>items<span class="token space"> </span><span class="token operator">!==</span><span class="token space"> </span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token operator">&lt;</span>LoadedView<span class="token space"> </span>items<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>items<span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">return</span><span class="token space"> </span><span class="token operator">&lt;</span>ErrorView<span class="token space"> </span>error<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>error<span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>array-error-loading-conditional.ts</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-typescript" data-filename="status-conditional.ts"><code class="language-typescript"><span class="token keyword">switch</span><span class="token space"> </span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">case</span><span class="token space"> </span><span class="token string">'unloaded'</span><span class="token operator">:</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token operator">&lt;</span>UnloadedView<span class="token space"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">case</span><span class="token space"> </span><span class="token string">'loading'</span><span class="token operator">:</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token operator">&lt;</span>LoadingView<span class="token space"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">case</span><span class="token space"> </span><span class="token string">'loaded'</span><span class="token operator">:</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token operator">&lt;</span>LoadedView<span class="token space"> </span>items<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>items<span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">case</span><span class="token space"> </span><span class="token string">'error'</span><span class="token operator">:</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token operator">&lt;</span>ErrorView<span class="token space"> </span>error<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>error<span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>status-conditional.ts</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-typescript" data-filename="tagged-union.ts"><code class="language-typescript"><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">First</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>tag<span class="token operator">:</span><span class="token space"> </span><span class="token string">'first'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>prop<span class="token operator">:</span><span class="token space"> </span><span class="token builtin">number</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">Second</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>tag<span class="token operator">:</span><span class="token space"> </span><span class="token string">'second'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>value<span class="token operator">:</span><span class="token space"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">FirstOrSecond</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span>First<span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span>Second<span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">declare</span><span class="token space"> </span><span class="token keyword">function</span><span class="token space"> </span><span class="token function">getFirstOrSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token space"> </span>FirstOrSecond<span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">const</span><span class="token space"> </span>thing<span class="token operator">:</span><span class="token space"> </span>FirstOrSecond<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">getFirstOrSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">switch</span><span class="token space"> </span><span class="token punctuation">(</span>thing<span class="token punctuation">.</span>tag<span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">case</span><span class="token space"> </span><span class="token string">'first'</span><span class="token operator">:</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>TypeScript<span class="token space"> </span>knows<span class="token space"> </span>prop<span class="token space"> </span>exists<span class="token space"> </span>and<span class="token space"> </span>is<span class="token space"> </span>a<span class="token space"> </span>number.</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>Accessing<span class="token space"> </span>thing.value<span class="token space"> </span>would<span class="token space"> </span>cause<span class="token space"> </span>an<span class="token space"> </span>error.</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span>thing<span class="token punctuation">.</span>prop<span class="token space"> </span><span class="token operator">+</span><span class="token space"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">case</span><span class="token space"> </span><span class="token string">'second'</span><span class="token operator">:</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>And<span class="token space"> </span>value<span class="token space"> </span>exists<span class="token space"> </span>and<span class="token space"> </span>is<span class="token space"> </span>a<span class="token space"> </span>string<span class="token space"> </span>here</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span>thing<span class="token punctuation">.</span>value<span class="token space"> </span><span class="token operator">+</span><span class="token space"> </span><span class="token string">'<span class="token space"> </span>came<span class="token space"> </span>in<span class="token space"> </span>second'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>tagged-union.ts</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-typescript" data-filename="union-fail.ts"><code class="language-typescript"><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">First</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>prop<span class="token operator">:</span><span class="token space"> </span><span class="token builtin">number</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">Second</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>value<span class="token operator">:</span><span class="token space"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">FirstOrSecond</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span>First<span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span>Second<span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">declare</span><span class="token space"> </span><span class="token keyword">function</span><span class="token space"> </span><span class="token function">getFirstOrSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token space"> </span>FirstOrSecond<span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">const</span><span class="token space"> </span>thing<span class="token operator">:</span><span class="token space"> </span>FirstOrSecond<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">getFirstOrSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token comment">//<span class="token space"> </span>TypeScript<span class="token space"> </span>complains<span class="token space"> </span>about<span class="token space"> </span>Second<span class="token space"> </span>not<span class="token space"> </span>having<span class="token space"> </span>a<span class="token space"> </span>`prop`<span class="token space"> </span>property.</span><span class="token lf">
</span><span class="token keyword">if</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token space"> </span>thing<span class="token punctuation">.</span>prop<span class="token space"> </span><span class="token operator">===</span><span class="token space"> </span><span class="token string">'number'</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>TypeScript<span class="token space"> </span>does<span class="token space"> </span>not<span class="token space"> </span>know<span class="token space"> </span>you<span class="token space"> </span>have<span class="token space"> </span>a<span class="token space"> </span>First</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token comment">//<span class="token space"> </span>without<span class="token space"> </span>an<span class="token space"> </span>explicit<span class="token space"> </span>cast</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>prop<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span>thing<span class="token space"> </span><span class="token keyword">as</span><span class="token space"> </span>First<span class="token punctuation">)</span><span class="token punctuation">.</span>prop<span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token space"> </span><span class="token keyword">else</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>value<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">(</span>thing<span class="token space"> </span><span class="token keyword">as</span><span class="token space"> </span>Second<span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>union-fail.ts</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-typescript" data-filename="tagged-union-state.ts"><code class="language-typescript"><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">UnloadedState</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>status<span class="token operator">:</span><span class="token space"> </span><span class="token string">'unloaded'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">LoadingState</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>status<span class="token operator">:</span><span class="token space"> </span><span class="token string">'loading'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">LoadedState</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>status<span class="token operator">:</span><span class="token space"> </span><span class="token string">'loaded'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>items<span class="token operator">:</span><span class="token space"> </span>Item<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">ErrorState</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>status<span class="token operator">:</span><span class="token space"> </span><span class="token string">'error'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>error<span class="token operator">:</span><span class="token space"> </span>Error<span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">State</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span>UnloadedState<span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span>LoadingState<span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span>LoadedState<span class="token space"> </span><span class="token operator">|</span><span class="token space"> </span>ErrorState<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>tagged-union-state.ts</span></div></div></div><div class="code-toolbar"><pre class="line-numbers language-typescript" data-filename="array-state.ts"><code class="language-typescript"><span class="token keyword">type</span><span class="token space"> </span><span class="token class-name">State</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>items<span class="token operator">:</span><span class="token space"> </span>Item<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">const</span><span class="token space"> </span>defaultState<span class="token operator">:</span><span class="token space"> </span>State<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span>items<span class="token operator">:</span><span class="token space"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>array-state.ts</span></div></div></div></article><article class="p-5 flow-root rounded pb-3 mb-5 max-w-xl mx-auto bg-primary"><h3 class="text-4xl text-lightg font-muli mb-3"><a href="/gistpens/useonenter/">useOnEnter</a></h3><div class="entry-meta my-2 flex items-center rounded bg-secondary p-3 mb-3"><time class="font-body published" datetime="2019-03-10 20:36:51">March 10th, 2019</time><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mx-3 w-1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><p class="font-body">James DiGioia</p></div><div class="code-toolbar"><pre class="line-numbers language-js" data-filename="useOnEnter.js"><code class="language-js"><span class="token keyword">import</span><span class="token space"> </span>React<span class="token punctuation">,</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>useContext<span class="token punctuation">,</span><span class="token space"> </span>useEffect<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token keyword">from</span><span class="token space"> </span><span class="token string">'react'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token keyword">import</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>StdinContext<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token keyword">from</span><span class="token space"> </span><span class="token string">'ink'</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token keyword">export</span><span class="token space"> </span><span class="token keyword">default</span><span class="token space"> </span><span class="token keyword">function</span><span class="token space"> </span><span class="token function">useOnEnter</span><span class="token punctuation">(</span><span class="token parameter">onEnter</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token space"> </span>stdin<span class="token space"> </span><span class="token punctuation">}</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token function">useContext</span><span class="token punctuation">(</span>StdinContext<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span><span class="token function-variable function">onData</span><span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span><span class="token parameter">data</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">const</span><span class="token space"> </span>s<span class="token space"> </span><span class="token operator">=</span><span class="token space"> </span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">if</span><span class="token space"> </span><span class="token punctuation">(</span>s<span class="token space"> </span><span class="token operator">===</span><span class="token space"> </span><span class="token string">'\r'</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token function">onEnter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>stdin<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span><span class="token space"> </span>onData<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token keyword">return</span><span class="token space"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token space"> </span><span class="token operator">=&gt;</span><span class="token space"> </span><span class="token punctuation">{</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span>stdin<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span><span class="token space"> </span>onData<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token space"> </span><span class="token space"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token lf">
</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button type="button">Copy</button></div><div class="toolbar-item"><span>useOnEnter.js</span></div></div></div></article><div class="flow-root max-w-xl mx-auto items-stretch"><a class="bg-darkg p-5 rounded text-primary font-ovo no-underline flex align-center float-right" href="/gistpens/page/2/">Next <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="ml-3" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z"></path></svg></a></div></main></div></div></div></div>